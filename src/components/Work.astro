---
import { getLangFromUrl } from "../utilities/get-lang-from-url.utility";
import { useTranslations } from "../utilities/use-translations.utility";
import H2 from "./H2.astro";
import Section from "./Section.astro";
import Subheading from "./Subheading.astro";
import WorkPreview from "./WorkPreview.astro";
import { WORKS } from "../configuration/works.configuration";
import { useTranslatedPath } from "../utilities/use-translated-path.utility";
import Link from "./Link.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);

const firstWorks = WORKS.slice(0, 3);
---

<Section id="work" disableAnimation>
  <div
    class="flex flex-col gap-y-[12px] tablet:flex-row tablet:items-center tablet:justify-between"
  >
    <div>
      <H2>{t("work.title")}</H2>
      <Subheading class="text-[4px]">{t("work.subtitle")}</Subheading>
    </div>

    <Link
      style="secondary"
      class="mobile:w-full tablet:w-auto"
      href={translatePath("/works")}
    >
      {t("work.view-all-work")}
    </Link>
  </div>

  <div
    class="w-full mt-8 grid grid-cols-[repeat(auto-fit,minmax(clamp(200px,90vw,300px),1fr))] gap-9"
  >
    {firstWorks.map((work) => <WorkPreview {work} />)}
  </div>
</Section>
